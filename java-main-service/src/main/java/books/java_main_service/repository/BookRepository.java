package books.java_main_service.repository;import books.java_main_service.model.Book;import org.springframework.data.jpa.repository.JpaRepository;import org.springframework.data.jpa.repository.Query;import org.springframework.data.repository.query.Param;import org.springframework.stereotype.Repository;import java.util.List;@Repositorypublic interface BookRepository extends JpaRepository<Book, Long> {    @Query(            value =                    """    SELECT DISTINCT b.* FROM books b    LEFT JOIN book_genres bg ON b.id = bg.book_id    WHERE (:query IS NULL OR           LOWER(b.title) LIKE LOWER(CONCAT('%', :query, '%')) OR           LOWER(b.author) LIKE LOWER(CONCAT('%', :query, '%')))    AND (:genreIds IS NULL OR bg.genre_id IN (:genreIds))    """,            nativeQuery = true)    List<Book> searchByQueryAndGenres(            @Param("query") String query, @Param("genreIds") List<Long> genreIds);}