package books.java_main_service.controller;import books.java_main_service.model.Book;import books.java_main_service.model.Review;import books.java_main_service.service.ReviewService;import io.swagger.v3.oas.annotations.Operation;import io.swagger.v3.oas.annotations.Parameter;import io.swagger.v3.oas.annotations.media.Content;import io.swagger.v3.oas.annotations.media.ExampleObject;import io.swagger.v3.oas.annotations.media.Schema;import io.swagger.v3.oas.annotations.tags.Tag;import jakarta.validation.Valid;import org.springframework.http.HttpStatus;import org.springframework.http.ResponseEntity;import org.springframework.web.bind.annotation.*;import java.util.List;@Tag(name = "Reviews", description = "Отзывы на книги API")@RestController@RequestMapping("/books/{bookId}/reviews")public class ReviewController {    private final ReviewService reviewService;    public ReviewController(ReviewService reviewService) {        this.reviewService = reviewService;    }    @GetMapping    @Operation(summary = "Получение всех отзывов о книге")    public ResponseEntity<List<Review>> getAllBookReviews(            @PathVariable Long bookId,            @RequestParam(required = false) Integer rating,            @RequestParam(required = false) String sortBy,            @RequestParam(required = false) String direction) {        List<Review> reviews = reviewService.getBookReviews(bookId, rating, sortBy, direction);        return ResponseEntity.ok(reviews);    }    @GetMapping("/{reviewId}")    @Operation(summary = "Получение конкретного отзыва")    public ResponseEntity<Review> getReview(            @PathVariable Long bookId, @PathVariable Long reviewId) {        Review review = reviewService.getReviewById(bookId, reviewId);        return ResponseEntity.ok(review);    }    @PostMapping("/add")    @io.swagger.v3.oas.annotations.parameters.RequestBody(            description = "Пример тела запроса для создания книги",            content =                    @Content(                            mediaType = "application/json",                            schema = @Schema(implementation = Review.class),                            examples =                                    @ExampleObject(                                            name = "Пример отзыва",                                            value =                                                    """                {                  "rating": 5,                  "description": "ИМБА"                }                """)))    @Operation(summary = "Добавление нового отзыва")    public ResponseEntity<Review> addReview(            @PathVariable Long bookId,            @Valid @RequestBody Review review,            @Parameter(hidden = true) @RequestHeader("Authorization") String accessToken) {        Review savedReview = reviewService.addReview(bookId, review, accessToken);        return ResponseEntity.status(HttpStatus.CREATED).body(savedReview);    }}